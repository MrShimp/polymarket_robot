# 紧急高置信度策略使用指南

## 策略概述

紧急高置信度策略是一个专门用于扫描并筛选出即将结束且具有高胜率的Polymarket市场的自动化工具。该策略可以帮助交易者快速识别短期内的高置信度交易机会。

## 核心功能

### 1. 基础策略 (`urgent_high_confidence_strategy.py`)
- **时间阈值**: 10分钟内结束的市场
- **胜率范围**: 90%-95%之间
- **目标**: Yes或No选项的高置信度机会

### 2. 灵活策略 (`flexible_urgent_strategy.py`)
- **可调参数**: 时间阈值、胜率范围均可自定义
- **更高灵活性**: 适应不同的市场条件和风险偏好

## 使用方法

### 快速开始

1. **运行基础策略**:
```bash
python3 run_urgent_strategy.py
```

2. **运行灵活策略**（推荐）:
```bash
# 使用默认参数（15分钟，85%-95%胜率）
python3 strategies/flexible_urgent_strategy.py

# 自定义参数
python3 strategies/flexible_urgent_strategy.py --time 30 --min-conf 0.8 --max-conf 0.95
```

### 参数说明

| 参数 | 说明 | 默认值 | 示例 |
|------|------|--------|------|
| `--time` | 时间阈值（分钟） | 15 | `--time 30` |
| `--min-conf` | 最小胜率 | 0.85 | `--min-conf 0.8` |
| `--max-conf` | 最大胜率 | 0.95 | `--max-conf 0.95` |
| `--data-dir` | 数据目录 | ./data | `--data-dir /path/to/data` |
| `--no-save` | 不保存文件 | False | `--no-save` |
| `--debug` | 调试模式 | False | `--debug` |

### 实际使用示例

```bash
# 寻找30分钟内结束，胜率80%-95%的市场
python3 strategies/flexible_urgent_strategy.py --time 30 --min-conf 0.8 --max-conf 0.95

# 寻找60分钟内结束，胜率75%-90%的市场
python3 strategies/flexible_urgent_strategy.py --time 60 --min-conf 0.75 --max-conf 0.9

# 仅查看结果，不保存文件
python3 strategies/flexible_urgent_strategy.py --time 15 --no-save
```

## 输出结果

### 1. 控制台输出
策略运行时会显示：
- 策略参数配置
- 扫描进度
- 发现的机会数量
- 最佳机会详情
- 执行耗时

### 2. 保存的文件

#### CSV数据文件
位置: `data/strategies/urgent_high_confidence_markets_YYYYMMDD_HHMMSS.csv`

包含字段:
- 基础市场信息（ID、问题、分类等）
- 价格和交易数据
- 策略分析结果（胜率、胜出选项、剩余时间等）

#### JSON报告文件
位置: `data/reports/urgent_high_confidence_report_YYYYMMDD_HHMMSS.json`

包含内容:
- 策略执行统计
- 置信度分布
- 胜出选项分布
- 最佳机会排名

## 策略解读

### 成功案例分析

以下是一个实际发现的机会：

```
市场: Ethereum Up or Down - January 18, 1AM ET
ID: 1196688
胜率: 94.0% (No - 以太坊价格下跌)
剩余时间: 5分钟
交易量: $23,713
流动性: $7,575
```

**分析要点**:
1. **高置信度**: 94%的胜率表明市场对结果有很强的共识
2. **短时间窗口**: 5分钟内结束，适合快速决策
3. **充足流动性**: $7,575的流动性支持合理规模的交易
4. **活跃市场**: $23,713的交易量显示市场活跃度

### 风险提示

1. **时间敏感**: 紧急市场时间窗口很短，需要快速决策
2. **流动性风险**: 检查流动性是否足够支持你的交易规模
3. **市场风险**: 即使是高置信度的市场也存在不确定性
4. **技术风险**: 网络延迟可能影响交易执行

## 最佳实践

### 1. 参数调优
- **保守策略**: 时间15分钟，胜率90%-95%
- **平衡策略**: 时间30分钟，胜率85%-95%
- **激进策略**: 时间60分钟，胜率80%-95%

### 2. 使用建议
- 定期运行策略（如每5-10分钟）
- 结合多个时间窗口和胜率范围
- 关注流动性和交易量指标
- 设置合理的仓位管理

### 3. 监控要点
- 市场剩余时间
- 实时价格变化
- 流动性变化
- 交易量波动

## 技术架构

### 核心组件
1. **市场扫描器**: 批量获取市场数据
2. **时间过滤器**: 筛选即将结束的市场
3. **置信度分析器**: 计算胜率和胜出选项
4. **数据存储器**: 保存结果到CSV和JSON
5. **报告生成器**: 生成分析报告

### 数据流程
```
API请求 → 市场数据 → 时间筛选 → 胜率分析 → 结果保存 → 报告生成
```

## 故障排除

### 常见问题

1. **没有找到符合条件的市场**
   - 调整时间阈值（增加到30-60分钟）
   - 放宽胜率范围（如80%-95%）
   - 稍后重新运行

2. **网络连接错误**
   - 检查网络连接
   - 等待几分钟后重试
   - 使用`--debug`参数查看详细错误

3. **数据解析错误**
   - 可能是API格式变化
   - 检查日志文件
   - 联系开发者更新

### 日志文件
- 策略执行日志会显示在控制台
- 使用`--debug`参数获取更详细的信息

## 更新和维护

### 定期检查
- API接口变化
- 数据格式更新
- 策略参数优化

### 版本历史
- v1.0: 基础紧急高置信度策略
- v1.1: 添加灵活参数配置
- v1.2: 优化性能和错误处理

## 联系支持

如有问题或建议，请：
1. 检查本文档的故障排除部分
2. 查看代码注释和日志
3. 提交Issue或联系开发团队

---

**免责声明**: 本策略仅供参考，不构成投资建议。交易有风险，请谨慎决策。