# BTC 15分钟策略 V2

## 策略概述

BTC 15分钟 Polymarket 策略 V2 是基于新的交易规则设计的自动化交易策略，专注于BTC价格预测市场的短期交易机会。

## 核心特性

### 📅 交易时段
- **上午时段**: 10:00 - 12:00 (北京时间)
- **下午时段**: 15:30 - 19:00 (北京时间)
- 只在指定时段内执行交易

### 🎯 交易频次
- 每15分钟区间最多执行1笔交易
- 严格控制交易频率，避免过度交易

### 🔍 入场过滤条件

#### 1. 波动率过滤
- 15分钟内BTC价格波动 ≥ $30
- 确保市场有足够的波动性

#### 2. EMA趋势过滤
- **多头信号**: EMA9 > EMA21
- **空头信号**: EMA9 < EMA21
- 基于指数移动平均线判断趋势方向

#### 3. 突破回踩确认
- 检测价格突破关键位置
- 等待5分钟回踩确认
- 避免假突破

### 💰 入场执行

#### 概率区间
- **入场区间**: 0.60 - 0.62
- 只在此概率范围内执行交易
- 寻找相对低风险的入场点

#### 双向交易
- 支持YES和NO两个方向
- 根据市场概率自动选择方向

### 📈 止盈策略

#### 主要止盈目标
- **第一目标**: 概率达到 0.90
- 获得稳定收益后及时止盈

#### 风险回报比止盈
- **最小RR**: 1.5倍
- 当盈利达到1.5倍风险时止盈
- 确保良好的风险回报比

### 📉 止损策略

#### 结构点止损
- 基于最近5分钟的价格结构点
- 动态调整止损位置
- 添加2%缓冲避免噪音

#### 智能止损计算
- 多头: 结构支撑位下方
- 空头: 结构阻力位上方
- 最大限度保护资金

### 🛡️ 风险控制

#### 连续止损保护
- **触发条件**: 连续2笔止损
- **冷却时间**: 45分钟
- 防止连续亏损扩大

#### 资金管理
- 固定交易金额
- 严格控制单笔风险
- 避免过度杠杆

## 使用方法

### 1. 快速启动

```bash
# 交互式启动
python start_btc_15min_strategy_v2.py

# 命令行启动
python start_btc_15min_strategy_v2.py <market_id> [amount] [baseline_price]
```

### 2. 参数说明

- `market_id`: Polymarket市场ID
- `amount`: 交易金额 (默认: $10)
- `baseline_price`: BTC基准价格 (默认: $95,000)

### 3. 启动示例

```bash
# 使用默认参数
python start_btc_15min_strategy_v2.py 0x123...

# 指定交易金额
python start_btc_15min_strategy_v2.py 0x123... 20.0

# 指定所有参数
python start_btc_15min_strategy_v2.py 0x123... 20.0 98000
```

## 策略监控

### 实时状态显示
- BTC当前价格
- 交易时段状态
- 波动率检查结果
- EMA趋势分析
- 风控状态

### 日志记录
- 详细的交易日志
- 策略决策过程
- 盈亏记录

### 交易记录
- 自动保存交易记录到 `data/btc_trades_v2/`
- JSON格式，包含完整交易信息
- 便于后续分析和优化

## 文件结构

```
btc_15min_strategy_v2.py          # 主策略文件
start_btc_15min_strategy_v2.py    # 启动脚本
data/
├── btc_strategy_v2_logs/         # 策略日志
├── btc_trades_v2/                # 交易记录
└── btc_intervals/                # 区间数据
```

## 策略优势

### 1. 多重过滤
- 时间、波动率、趋势、技术形态
- 多层过滤提高信号质量

### 2. 智能止损
- 基于市场结构的动态止损
- 比固定百分比更有效

### 3. 风险控制
- 连续止损保护机制
- 防止情绪化交易

### 4. 自动化执行
- 24小时监控市场
- 及时捕捉交易机会

## 注意事项

### 1. 市场风险
- 加密货币市场波动较大
- 请合理控制仓位大小

### 2. 技术风险
- 网络连接稳定性
- API调用限制

### 3. 策略风险
- 历史表现不代表未来收益
- 建议先小额测试

## 配置要求

### 环境依赖
- Python 3.8+
- 相关依赖包 (见requirements.txt)

### 网络要求
- 稳定的网络连接
- 访问Polymarket和Binance API

### 资金要求
- Polymarket账户余额
- 建议准备充足的交易资金

## 技术支持

如有问题或建议，请查看：
1. 日志文件排查问题
2. 检查网络连接
3. 验证API配置
4. 联系技术支持

---

**免责声明**: 本策略仅供学习和研究使用，不构成投资建议。交易有风险，投资需谨慎。